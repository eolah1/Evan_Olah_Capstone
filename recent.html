<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recent Transactions - Save Path</title>
  <link rel="stylesheet" href="css/project.css">
</head>
<body>
  <div id="wrapper">
    <header>
      <div class="logo">Save Path</div>
      <nav class="top-nav">
        <a href="index.html" class="home-link">Home</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="calendar.html">Calendar</a>
        <a href="visuals.html">Visuals</a>
        <a href="goals.html">Goals</a>
      </nav>
    </header>

    <main>
      <section class="content-container">
        <div class="left-column">
          <h2>Recent Transactions</h2>
          <table class="feature-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Frequency</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody id="transactions-body"></tbody>
          </table>
          <div class="dashboard-info-boxes">
            <div class="dashboard-box" onclick="location.href='dashboard.html'">
              Back to Dashboard
            </div>
          </div>
        </div>
        <div class="right-column">
          <img src="images/recentimage.png" alt="Recent Transactions Visual">
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Budget Calendar | All Rights Reserved</p>
    </footer>
  </div>

  <script>
    const tbody = document.getElementById('transactions-body');
    const transactions = JSON.parse(localStorage.getItem('transactions')) || [];

    transactions.sort((a, b) => new Date(b.date) - new Date(a.date));

    transactions.slice(0, 3).forEach(tx => {
      const row = document.createElement('tr');

      const dateCell = document.createElement('td');
      const dateObj = new Date(tx.date);
      const month = dateObj.getMonth() + 1;
      const day = dateObj.getDate();
      dateCell.textContent = `${month}/${day}`;
      row.appendChild(dateCell);

      const descCell = document.createElement('td');
      descCell.textContent = tx.desc || tx.description || "";
      row.appendChild(descCell);

      const freqCell = document.createElement('td');
      freqCell.textContent = tx.frequency || "";
      row.appendChild(freqCell);

      const amountCell = document.createElement('td');
      amountCell.classList.add('amount');
      amountCell.textContent = tx.type === 'expense' ? `-$${tx.amount.toFixed(2)}` : `+$${tx.amount.toFixed(2)}`;
      amountCell.style.color = tx.type === 'expense' ? '#d00000' : '#007f5f';
      row.appendChild(amountCell);

      tbody.appendChild(row);
    });
  </script>
</body>
</html>