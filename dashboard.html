<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Save Path</title>
  <link rel="stylesheet" href="css/project.css">
</head>
<body>
  <div id="wrapper">
    <header>
      <h1 class="site-title">Save Path</h1>
      <nav class="top-nav">
        <a href="index.html" class="home-link">Home</a>

        <div class="controls">
          <label for="nav-select">Explore:</label>
          <select id="nav-select">
            <option value=""> </option>
            <option value="dashboard.html">Dashboard</option>
            <option value="visuals.html">Visuals</option>
            <option value="goals.html">Goals</option>
            <option value="calendar.html">Calendar</option>
          </select>
        </div>

        <a href="quickadd.html" class="quick-add-btn">+ Quick Add</a>
      </nav>
    </header>

    <main>
      <section class="welcome-message">
        <h2 id="welcome-text"></h2>
      </section>

      <section class="upcoming-payments">
        <h2>Upcoming Payments</h2>
        <ul id="payment-list"></ul>
      </section>

      <section class="goal-progress">
        <h2>Goal Progress</h2>
        <label id="goal-label"></label>
        <progress id="goal-bar" value="0" max="100"></progress>
        <p id="goal-percent"></p>
      </section>

      <section class="dashboard-info-boxes">
        <a href="recent.html" class="dashboard-box">
          <h3>Recent</h3>
          <p>View your most recent transactions.</p>
        </a>
        <a href="summary.html" class="dashboard-box">
          <h3>Summary</h3>
          <p>Quick overview of your finances.</p>
        </a>
        <a href="quickadd.html" class="dashboard-box">
          <h3>Quick Add</h3>
          <p>Add a new income or expense quickly.</p>
        </a>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Budget Calendar | All Rights Reserved<br>Contact us: 777-888-9999</p>
    </footer>
  </div>
  
  <script>
    document.getElementById('nav-select').addEventListener('change', (e) => {
      const page = e.target.value;
      if (page) window.location.href = page;
    });

    function showWelcomeMessage() {
      const now = new Date();
      const month = now.toLocaleString('default', { month: 'long' });
      const year = now.getFullYear();
      document.getElementById('welcome-text').textContent =
        `Welcome back! Hereâ€™s your financial snapshot for ${month} ${year}`;
    }

    function showUpcomingPayments() {
      const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
      const today = new Date();
      const tomorrow = new Date();
      tomorrow.setDate(today.getDate() + 1);

      const paymentList = document.getElementById('payment-list');
      paymentList.innerHTML = '';

      transactions.forEach(tx => {
        const txDate = new Date(tx.date);
        if (
          txDate.toDateString() === today.toDateString() ||
          txDate.toDateString() === tomorrow.toDateString()
        ) {
          const li = document.createElement('li');
          li.textContent = `${tx.desc} - $${tx.amount} (${txDate.toDateString()})`;
          paymentList.appendChild(li);
        }
      });

      if (!paymentList.hasChildNodes()) {
        paymentList.innerHTML = '<li>No payments today or tomorrow.</li>';
      }
    }

    function updateGoalProgress() {
      const goals = JSON.parse(localStorage.getItem('goals')) || [];
      if (goals.length > 0) {
        const goal = goals[0];
        const current = goal.saved || 0;
        const target = goal.target || 1;

        const bar = document.getElementById('goal-bar');
        const percent = document.getElementById('goal-percent');
        const label = document.getElementById('goal-label');

        bar.value = current;
        bar.max = target;
        const pct = Math.round((current / target) * 100);

        label.textContent = `${goal.name}: $${current} / $${target}`;
        percent.textContent = `${pct}% complete`;
      } else {
        document.getElementById('goal-label').textContent = 'No goals set yet.';
        document.getElementById('goal-percent').textContent = '';
      }
    }

    showWelcomeMessage();
    showUpcomingPayments();
    updateGoalProgress();
  </script>
</body>
</html>